<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Web_API - UI</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	<script type="text/javascript" src="./ChartJS/chartConfig.js"></script>
	<style type="text/css">
		body {
			background-color: gray;
			align-items: center;		
		}
		
		button  {
			margin-bottom: 20px;		
			border-radius: 10px;		
		}	
		
		button a {
			position: relative;
			text-decoration: none;		
			color: black;
		}
		
		.card {
			margin-left: auto;
			margin-right: auto;
			margin-bottom: 20px;
			background-color: white;
			box-shadow: 10px 10px 10px 10px black;
			border: 2px black solid;
			border-radius: 10px;
			text-align: center;
			width: 70%;
			height: 100%;
			padding-botton: 10px			
		}	
		
		.charts {
			padding-bottom: "20px";
		}
	</style>
</head>
<body>
	<div class="card">
		<h1>Home Page</h1>
		<div id="user_roles">
			<h3>User's Commands</h3>
			<button>
				<a href="/MVC_WEB/User/registerUser.html"> Register User </a>
			</button>
			<button onclick="getCPF('update_user')">
				<a id="update_user" href=""> Update User </a>
			</button>
			<button>
				<a id="delete_user" href="/MVC_WEB/User/deleteUser.html" > Delete User </a>
			</button>
			<button onclick="getCPF('get_user')">
				<a id="get_user" href=""> Get User </a>
			</button>
			<button>
				<a href="/MVC_WEB/User/listUser.html"> List Users </a>
			</button>
		</div>		
		<div id="address_roles">
			<h3>Address's Commands</h3>
			<button onclick="getCPF('register_address')">
				<a id="register_address" href=""> Register Address </a>
			</button>
			<button onclick="getCPF('update_address')">
				<a id="update_address" href=""> Update Address </a>
			</button>
			<button>
				<a href="/MVC_WEB/Address/deleteAddress.html"> Delete Address </a>
			</button>
		</div>	
		<div id="chart_roles">
			<h3>Chart's User Commands</h3>
			<button onclick="getChart_UserName()">Chart User Names</button>
			<button onclick="getChart_UserAge()">Chart User Age</button>			
		</div>	
		<div id="chart_roles">
			<h3>Chart's Address Commands</h3>
			<button onclick="getChart_AddressState()">Chart Address State</button>		
			<button onclick="getChart_AddressCity()">Chart Address City</button>				
		</div>			
	</div>
	<div class="card" id="ChartCardUser" hidden>
		<h1>Chart's User Information</h1>
		<div style="display: inline-flex;">
			<div class="charts"><canvas id="chart_UserName"></canvas></div>		
			<div class="charts"><canvas id="chart_UserAge"></canvas></div>		
		</div>
	</div>
	<div class="card" id="ChartCardAddress" hidden>
		<h1>Chart's Address Information</h1>
		<div class="charts" style="display: inline-flex;">
			<div class="charts"><canvas id="chart_AddressState"></canvas></div>	
			<div class="charts"><canvas id="chart_AddressCity"></canvas></div>	
		</div>
	</div>
</body>
<script type="text/javascript">
	function getCPF(idElement){
		var cpf = prompt("Please, enter CPF user", "000.000.000-00")
		
		if(cpf != null){
			var e = document.getElementById(idElement);	
			
			cpf = maskCPF(cpf.trim());			
			
			e.setAttribute("href", getRoute(idElement) + "?user_cpf=" + cpf);
		}
	}
	
	function getRoute(idElement){
		switch(idElement){
			case "update_user": { return "/MVC_WEB/User/updateUser.html"; }
			case "get_user": { return "/MVC_WEB/UserAPI"; }
			case "register_address": { return "/MVC_WEB/Address/registerAddress.html"; }
			case "update_address": { return "/MVC_WEB/Address/updateAddress.html"; }
		}
	}
	
	function maskCPF(cpf){
		var value = "";
		cpf = cpf.replaceAll(".","").replaceAll("-","");		
		for(i = 0; i < cpf.length; i++){
			if(i == 3) value += cpf.substr(0, 3) + "." + cpf.substr(i, 1);
			else if(i == 6) value +=  cpf.substr(4, 2) + "." + cpf.substr(i, 1);
			else if(i == 9) value +=  cpf.substr(7, 2) + "-" + cpf.substr(i, 2);			
		}
		return value;
	}
</script>
</html>